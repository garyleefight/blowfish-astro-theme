---
import { t } from '../../lib/i18n';

interface TocItem {
  id: string;
  label: string;
}

export interface Props {
  items?: TocItem[];
}

const { items = [] } = Astro.props;
---

{items.length > 0 && (
  <>
    <details open id="TOCView" class="toc-right mt-0 overflow-y-auto overscroll-contain bf-scrollbar rounded-lg -ms-5 ps-5 pe-2 hidden lg:block">
      <summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
        {t('article.table_of_contents')}
      </summary>
      <div class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600">
        <ol class="m-0 list-decimal ps-5 text-sm leading-6">
          {items.map((item) => (
            <li>
              <a class="font-normal text-neutral-700 dark:text-neutral-300 no-underline hover:text-primary-600 dark:hover:text-primary-400" href={`#${item.id}`}>
                {item.label}
              </a>
            </li>
          ))}
        </ol>
      </div>
    </details>

    <details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden">
      <summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
        {t('article.table_of_contents')}
      </summary>
      <div class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600">
        <ol class="m-0 list-decimal ps-5 text-sm leading-6">
          {items.map((item) => (
            <li>
              <a class="font-normal text-neutral-700 dark:text-neutral-300 no-underline hover:text-primary-600 dark:hover:text-primary-400" href={`#${item.id}`}>
                {item.label}
              </a>
            </li>
          ))}
        </ol>
      </div>
    </details>
  </>
)}
