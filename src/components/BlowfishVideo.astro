---
import { pickBoolean, pickString } from '../lib/props';

export interface Props {
  src?: string;
  url?: string;
  video?: string;
  poster?: string;
  title?: string;
  caption?: string;
  controls?: boolean;
  autoplay?: boolean;
  muted?: boolean;
  loop?: boolean;
}

const props = Astro.props as Record<string, unknown>;
const src = pickString(props, ['src', 'url', 'video']);
const poster = pickString(props, ['poster']);
const caption = pickString(props, ['caption', 'title']);
const controls = pickBoolean(props, ['controls'], true);
const autoplay = pickBoolean(props, ['autoplay'], false);
const muted = pickBoolean(props, ['muted'], false);
const loop = pickBoolean(props, ['loop'], false);
---

<figure class="bf-card bf-video">
  <video src={src} poster={poster || undefined} controls={controls} autoplay={autoplay} muted={muted} loop={loop}></video>
  {caption && <figcaption>{caption}</figcaption>}
</figure>

<style>
  .bf-video { margin: 0; overflow: hidden; }
  .bf-video video { width: 100%; display: block; background: #000; }
  .bf-video figcaption { padding: 0.45rem 0.75rem 0.65rem; color: var(--bf-muted); font-size: 0.82rem; }
</style>
