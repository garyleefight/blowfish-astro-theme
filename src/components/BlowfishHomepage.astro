---
import BlowfishHomeBackground from './home/BlowfishHomeBackground.astro';
import BlowfishHomeCard from './home/BlowfishHomeCard.astro';
import BlowfishHomeCustom from './home/BlowfishHomeCustom.astro';
import BlowfishHomeHero from './home/BlowfishHomeHero.astro';
import BlowfishHomePage from './home/BlowfishHomePage.astro';
import BlowfishHomeProfile from './home/BlowfishHomeProfile.astro';
import type { BlowfishHomepageConfig, BlowfishRecentArticle } from '../types/homepage';

export interface Props {
  config: BlowfishHomepageConfig;
  contentHtml?: string;
  articles?: BlowfishRecentArticle[];
}

const { config, contentHtml = '', articles = [] } = Astro.props;

const mergedConfig: BlowfishHomepageConfig = {
  ...config,
  recentLimit: config.showRecentItems || config.recentLimit,
  cardView: Boolean(config.cardView || config.cardViewScreenWidth)
};
const resolvedLayout =
  mergedConfig.layout === 'profile' ||
  mergedConfig.layout === 'page' ||
  mergedConfig.layout === 'hero' ||
  mergedConfig.layout === 'background' ||
  mergedConfig.layout === 'card' ||
  mergedConfig.layout === 'custom'
    ? mergedConfig.layout
    : 'profile';
---

{resolvedLayout === 'profile' && (
  <BlowfishHomeProfile config={mergedConfig} articles={articles} contentHtml={contentHtml}>
    <slot />
  </BlowfishHomeProfile>
)}
{resolvedLayout === 'page' && (
  <BlowfishHomePage config={mergedConfig} articles={articles} contentHtml={contentHtml}>
    <slot />
  </BlowfishHomePage>
)}
{resolvedLayout === 'hero' && (
  <BlowfishHomeHero config={mergedConfig} articles={articles} contentHtml={contentHtml}>
    <slot />
  </BlowfishHomeHero>
)}
{resolvedLayout === 'background' && (
  <BlowfishHomeBackground config={mergedConfig} articles={articles} contentHtml={contentHtml}>
    <slot />
  </BlowfishHomeBackground>
)}
{resolvedLayout === 'card' && (
  <BlowfishHomeCard config={mergedConfig} articles={articles} contentHtml={contentHtml}>
    <slot />
  </BlowfishHomeCard>
)}
{resolvedLayout === 'custom' && (
  <BlowfishHomeCustom config={mergedConfig} articles={articles} contentHtml={contentHtml}>
    <slot />
  </BlowfishHomeCustom>
)}
