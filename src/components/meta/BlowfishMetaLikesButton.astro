---
import { t } from '../../lib/i18n';
const likeLabel = t('likes.like');
const likedLabel = t('likes.liked');
---

<button
  id="button_likes"
  class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400"
  data-like-label={likeLabel}
  data-liked-label={likedLabel}
>
  <span id="button_likes_heart" class="inline-block align-text-bottom hidden"><img src="/blowfish-icons/heart.svg" alt="" /></span>
  <span id="button_likes_emtpty_heart" class="inline-block align-text-bottom"><img src="/blowfish-icons/heart-empty.svg" alt="" /></span>
  <span id="button_likes_text">&nbsp;{likeLabel}</span>
</button>

<script is:inline>
  const btn = document.getElementById('button_likes');
  const text = document.getElementById('button_likes_text');
  const empty = document.getElementById('button_likes_emtpty_heart');
  const full = document.getElementById('button_likes_heart');
  const likeLabel = btn?.dataset.likeLabel ?? '';
  const likedLabel = btn?.dataset.likedLabel ?? '';

  btn?.addEventListener('click', () => {
    if (!text || !empty || !full) return;
    const liked = likedLabel ? text.textContent?.includes(likedLabel) : false;
    text.textContent = liked ? `\u00a0${likeLabel}` : `\u00a0${likedLabel}`;
    empty.classList.toggle('hidden', !liked);
    full.classList.toggle('hidden', liked);
  });
</script>
