---
import { pickNumber, pickString } from '../lib/props';

export interface Props {
  src?: string;
  url?: string;
  image?: string;
  alt?: string;
  caption?: string;
  title?: string;
  width?: number;
  height?: number;
}

const props = Astro.props as Record<string, unknown>;
const src = pickString(props, ['src', 'url', 'image']);
const alt = pickString(props, ['alt', 'title', 'caption'], 'image');
const caption = pickString(props, ['caption', 'title']);
const width = pickNumber(props, ['width'], 0);
const height = pickNumber(props, ['height'], 0);
---

<figure class="bf-card bf-figure">
  <img src={src} alt={alt} width={width || undefined} height={height || undefined} loading="lazy" />
  {caption && <figcaption>{caption}</figcaption>}
</figure>

<style>
  .bf-figure {
    margin: 0;
    overflow: hidden;
  }

  .bf-figure img {
    display: block;
    width: 100%;
    height: auto;
  }

  .bf-figure figcaption {
    font-size: 0.82rem;
    color: var(--bf-muted);
    padding: 0.55rem 0.8rem;
  }
</style>
