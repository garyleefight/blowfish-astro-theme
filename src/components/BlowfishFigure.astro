---
import { pickNumber, pickString } from '../lib/props';
import { t } from '../lib/i18n';

export interface Props {
  src?: string;
  url?: string;
  image?: string;
  alt?: string;
  caption?: string;
  title?: string;
  width?: number;
  height?: number;
}

const props = Astro.props as Record<string, unknown>;
const src = pickString(props, ['src', 'url', 'image']);
const alt = pickString(props, ['alt', 'title', 'caption'], t('components.image_alt'));
const caption = pickString(props, ['caption', 'title']);
const width = pickNumber(props, ['width'], 0);
const height = pickNumber(props, ['height'], 0);
---

<figure>
  <img class="my-0 rounded-md" src={src} alt={alt} width={width || undefined} height={height || undefined} loading="lazy" />
  {caption && <figcaption>{caption}</figcaption>}
</figure>
