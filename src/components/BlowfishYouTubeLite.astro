---
import { pickString } from '../lib/props';

export interface Props {
  id?: string;
  videoId?: string;
  youtube?: string;
  url?: string;
  title?: string;
  label?: string;
  params?: string;
}

const props = Astro.props as Record<string, unknown>;
const raw = pickString(props, ['id', 'videoId', 'youtube']);
const url = pickString(props, ['url']);
const parsedFromUrl =
  url.match(/[?&]v=([A-Za-z0-9_-]{6,})/)?.[1] ||
  url.match(/youtu\.be\/([A-Za-z0-9_-]{6,})/)?.[1] ||
  '';
const id = raw || parsedFromUrl;
const title = pickString(props, ['title', 'label'], 'Blowfish');
const params = pickString(props, ['params']);
---

<lite-youtube videoid={id} playlabel={title} params={params} />
