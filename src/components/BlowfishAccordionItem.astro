---
import BlowfishIcon from './BlowfishIcon.astro';
import { pickBoolean, pickString } from '../lib/props';
import { t } from '../lib/i18n';

export interface Props {
  title?: string;
  heading?: string;
  label?: string;
  icon?: string;
  open?: boolean;
  defaultOpen?: boolean;
}

const props = Astro.props as Record<string, unknown>;
const title = pickString(props, ['title', 'heading', 'label'], t('components.default_accordion_title'));
const icon = pickString(props, ['icon']);
const open = pickBoolean(props, ['open', 'defaultOpen'], false);
---

<details
  class="group overflow-hidden rounded-lg border border-neutral-200 dark:border-neutral-700"
  data-accordion-item
  open={open}
>
  <summary class="flex w-full cursor-pointer items-center justify-between gap-4 px-4 py-3 text-left text-lg font-semibold text-neutral-900 dark:text-neutral-100">
    <span class="flex items-center gap-2">
      {icon && <BlowfishIcon name={icon} class="inline-block" />}
      <span>{title}</span>
    </span>
    <span class="text-neutral-500 transition group-open:rotate-180 dark:text-neutral-400">
      <BlowfishIcon name="chevron-down" />
    </span>
  </summary>
  <div class="px-4 pb-4 text-neutral-700 dark:text-neutral-300"><slot /></div>
</details>
