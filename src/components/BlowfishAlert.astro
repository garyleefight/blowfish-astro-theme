---
import { pickString } from '../lib/props';

export interface Props {
  type?: 'info' | 'success' | 'warning' | 'error';
  style?: 'info' | 'success' | 'warning' | 'error';
  alertType?: 'info' | 'success' | 'warning' | 'error';
  title?: string;
  heading?: string;
  content?: string;
  text?: string;
  description?: string;
}

const props = Astro.props as Record<string, unknown>;
const type = pickString(props, ['type', 'style', 'alertType'], 'info') as Props['type'];
const title = pickString(props, ['title', 'heading']);
const content = pickString(props, ['content', 'text', 'description']);

const colorMap = {
  info: 'var(--bf-primary)',
  success: 'var(--bf-success)',
  warning: 'var(--bf-warning)',
  error: 'var(--bf-danger)'
};

const selected = type && type in colorMap ? type : 'info';
---

<aside class="bf-card bf-alert" style={`--bf-alert-color: ${colorMap[selected]};`}>
  {title && <h4>{title}</h4>}
  {content && <p>{content}</p>}
  <slot />
</aside>

<style>
  .bf-alert {
    border-left: 4px solid var(--bf-alert-color);
    padding: 0.8rem 1rem;
  }

  .bf-alert h4 {
    margin: 0 0 0.35rem;
    font-size: 0.95rem;
  }

  .bf-alert p {
    margin: 0;
    color: var(--bf-muted);
  }
</style>
